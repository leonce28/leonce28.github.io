# 撑花儿 App 产品设计文档 (PRD)

> 版本：1.0  
> 更新日期：2026-02-19  
> 作者：AI 产品分析  
> 状态：待开发

---

## 一、产品概述

### 1.1 产品简介

**撑花儿** 是一款简洁高效的科技新闻聚合阅读 App，基于同名博客网站 `leonce28.github.io` 的内容，帮助用户每天花 5 分钟掌握科技圈动态。

### 1.2 产品定位

- **核心价值**：精选聚合 + 极简体验 + 每日推送
- **差异化优势**：专注科技领域、每日精选 40 条、无广告无干扰

### 1.3 产品信息

| 项目 | 内容 |
|------|------|
| 产品名称 | 撑花儿 |
| 产品类型 | 科技新闻聚合阅读 App |
| 目标平台 | Android |
| 商业模式 | 纯免费 |
| 账号系统 | 无（匿名使用） |

---

## 二、目标用户

### 2.1 用户画像

| 用户类型 | 特征 | 核心需求 | 使用场景 |
|---------|------|---------|---------|
| **技术从业者** | 25-40岁，程序员/产品/运营 | 快速了解行业动态，技术趋势 | 通勤、午休、睡前 |
| **科技爱好者** | 18-35岁，关注新事物 | 获取前沿资讯，发现有趣产品 | 碎片时间浏览 |
| **信息焦虑者** | 各年龄段，时间碎片化 | 高效获取精选信息，减少筛选成本 | 每日固定时间阅读 |

### 2.2 用户场景

1. **早晨通勤**：收到推送通知，快速浏览今日科技新闻
2. **午休时间**：深入了解感兴趣的文章详情
3. **睡前阅读**：查看历史归档，回顾往期内容

---

## 三、内容来源

App 内容来源于同名博客，每日自动抓取以下 4 个优质来源：

| 来源 | 类型 | 内容特点 | 数量 |
|------|------|---------|------|
| **Hacker News** | API | 技术社区热门，国际化视野 | 10 条/天 |
| **36氪** | RSS | 国内创业投资，商业动态 | 10 条/天 |
| **InfoQ** | RSS | 技术深度文章，架构实践 | 10 条/天 |
| **少数派** | RSS | 数字生活，效率工具 | 10 条/天 |

**每日总计**：40 条精选科技新闻

---

## 四、功能需求

### 4.1 功能架构图

```
┌─────────────────────────────────────────────────────┐
│                    撑花儿 App                        │
├─────────────────────────────────────────────────────┤
│                                                     │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐ │
│  │   🏠 首页   │  │   📰 归档   │  │   ⚙️ 设置   │ │
│  │             │  │             │  │             │ │
│  │ 今日新闻    │  │ 历史日报    │  │ 推送设置    │ │
│  │ 来源分组    │  │ 日期筛选    │  │ 主题切换    │ │
│  │ 原文跳转    │  │ 搜索功能    │  │ 来源管理    │ │
│  │ 下拉刷新    │  │             │  │ 缓存清理    │ │
│  └─────────────┘  └─────────────┘  └─────────────┘ │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │              🔔 推送通知                     │   │
│  │         每日 8:00 推送新闻提醒               │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 4.2 功能清单

#### 4.2.1 首页模块

| 功能 | 描述 | 优先级 | MVP |
|------|------|--------|-----|
| 今日新闻列表 | 展示当天的科技新闻，按来源分组 | P0 | ✅ |
| 来源分组展示 | 新闻按 Hacker News、36氪、InfoQ、少数派分组 | P0 | ✅ |
| 新闻卡片 | 显示标题、摘要（最多 200 字） | P0 | ✅ |
| 原文跳转 | 点击新闻跳转到原网页（外部浏览器） | P0 | ✅ |
| 下拉刷新 | 下拉刷新获取最新内容 | P1 | |
| 离线缓存 | 缓存已加载内容，离线可查看 | P1 | |
| 加载状态 | 显示加载中、加载失败、无数据状态 | P1 | |

#### 4.2.2 归档模块

| 功能 | 描述 | 优先级 | MVP |
|------|------|--------|-----|
| 历史日报列表 | 按时间倒序展示往期日报 | P1 | ✅ |
| 日期选择器 | 快速跳转到指定日期 | P2 | |
| 搜索功能 | 搜索历史新闻标题 | P2 | |

#### 4.2.3 设置模块

| 功能 | 描述 | 优先级 | MVP |
|------|------|--------|-----|
| 推送开关 | 开启/关闭每日新闻推送 | P0 | ✅ |
| 深色模式 | 明/暗主题切换 | P1 | ✅ |
| 来源订阅 | 选择显示哪些新闻来源 | P2 | |
| 清除缓存 | 清理本地缓存数据 | P2 | |
| 关于页面 | 显示版本号、开源协议等 | P2 | |

#### 4.2.4 推送模块

| 功能 | 描述 | 优先级 | MVP |
|------|------|--------|-----|
| 每日推送 | 每日北京时间 8:00 推送新闻提醒 | P0 | ✅ |
| 推送内容 | 显示"今日科技新闻已更新，点击查看" | P0 | ✅ |
| 点击跳转 | 点击通知跳转到 App 首页 | P0 | ✅ |

### 4.3 非功能需求

| 类型 | 需求 |
|------|------|
| **性能** | 启动时间 < 2s，列表滚动流畅（60fps） |
| **兼容性** | Android 6.0+ (API 23+) |
| **网络** | 支持弱网环境，有离线缓存 |
| **存储** | 安装包 < 20MB，缓存 < 50MB |
| **安全** | 使用 HTTPS，不收集用户隐私 |

---

## 五、UI/UX 设计

### 5.1 设计原则

- **极简主义**：无广告、无推荐、无社交干扰
- **内容优先**：突出新闻标题和摘要
- **舒适阅读**：合适的字号、行高、间距

### 5.2 视觉规范

| 项目 | 规格 |
|------|------|
| **主色调** | #2196F3 (蓝色，科技感) |
| **辅助色** | #FF9800 (橙色，强调) |
| **背景色（亮色）** | #FFFFFF |
| **背景色（暗色）** | #121212 |
| **字体** | 系统默认字体 |
| **圆角** | 8dp |
| **图标风格** | Material Design |

### 5.3 页面结构

#### 首页布局

```
┌─────────────────────────────────────┐
│  ☰  撑花儿                    🔔   │  ← AppBar
├─────────────────────────────────────┤
│                                     │
│  📅 2026年2月19日                   │  ← 日期标题
│                                     │
├─────────────────────────────────────┤
│  🔷 Hacker News                     │  ← 来源分组
│  ┌─────────────────────────────┐   │
│  │ European Tech Alternatives  │   │
│  │ 欧洲科技替代方案地图...      │   │  ← 新闻卡片
│  │ 58 pts | 13 评论            │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ Sizing chaos                │   │
│  │ 尺码混乱：服装行业的...      │   │
│  │ 426 pts | 220 评论          │   │
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│  🟠 36氪                            │
│  ┌─────────────────────────────┐   │
│  │ ...                         │   │
│  └─────────────────────────────┘   │
│                                     │
├──────────┬──────────┬───────────────┤
│  🏠 首页  │  📰 归档  │  ⚙️ 设置      │  ← 底部导航
└──────────┴──────────┴───────────────┘
```

### 5.4 App 图标

- **设计元素**：使用博客现有卡通头像
- **尺寸**：512x512 px
- **格式**：PNG（透明背景）

---

## 六、技术方案

### 6.1 技术选型

| 层级 | 技术栈 | 选型理由 |
|------|--------|---------|
| **前端框架** | Flutter 3.x | 跨平台、AI 开发友好、热重载 |
| **状态管理** | Provider | 简单易用、官方推荐 |
| **网络请求** | http + dio | 功能完整、易于测试 |
| **本地存储** | SharedPreferences + SQLite | 轻量级、够用 |
| **推送服务** | Firebase Cloud Messaging | 免费、稳定、Android 原生支持 |
| **图片加载** | cached_network_image | 自动缓存 |

### 6.2 系统架构

```
┌─────────────────────────────────────────────────────┐
│                    Android App                       │
│  ┌─────────────────────────────────────────────┐    │
│  │           Presentation Layer                 │    │
│  │  Screens: Home / Archive / Settings         │    │
│  │  Widgets: NewsCard / SourceSection          │    │
│  └─────────────────────────────────────────────┘    │
│  ┌─────────────────────────────────────────────┐    │
│  │           Business Logic Layer               │    │
│  │  Providers: NewsProvider / SettingsProvider │    │
│  └─────────────────────────────────────────────┘    │
│  ┌─────────────────────────────────────────────┐    │
│  │           Data Layer                         │    │
│  │  Services: ApiService / StorageService      │    │
│  │  Models: NewsItem / DailyNews               │    │
│  └─────────────────────────────────────────────┘    │
│  ┌─────────────────────────────────────────────┐    │
│  │           External Services                  │    │
│  │  Firebase: FCM Push / Analytics             │    │
│  └─────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────┘
                          │
                          ▼
┌─────────────────────────────────────────────────────┐
│                 Backend Services                    │
│  ┌─────────────────────────────────────────────┐    │
│  │  GitHub Pages (Data Source)                  │    │
│  │  https://leonce28.github.io/api/news.json   │    │
│  └─────────────────────────────────────────────┘    │
│  ┌─────────────────────────────────────────────┐    │
│  │  Firebase Cloud Messaging (Push)            │    │
│  │  Cloud Functions (Trigger)                  │    │
│  └─────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────┘
```

### 6.3 数据流

```
┌──────────────┐     爬取新闻      ┌──────────────┐
│ GitHub Actions│ ──────────────→ │  JSON API    │
│  (每日 8:00)  │                 │ /api/news.json│
└──────────────┘                  └──────────────┘
       │                                  │
       │ 触发推送                          │ HTTP GET
       ▼                                  ▼
┌──────────────┐                  ┌──────────────┐
│ Cloud Function│ ── FCM ──────→ │  Flutter App │
│              │    Push         │              │
└──────────────┘                 └──────────────┘
```

### 6.4 API 规范

#### GET /api/news.json

**响应格式：**

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "updated_at": "2026-02-19T08:00:00+08:00",
    "posts": [
      {
        "date": "2026-02-19",
        "title": "科技新闻日报 2026-02-19",
        "summary": "今日共 40 条科技新闻",
        "sources": {
          "Hacker News": 10,
          "36氪": 10,
          "InfoQ": 10,
          "少数派": 10
        },
        "items": {
          "hacker_news": [
            {
              "title": "European Tech Alternatives",
              "url": "https://eutechmap.com/map",
              "summary": "欧洲科技替代方案地图...",
              "score": 58,
              "comments": "https://news.ycombinator.com/item?id=xxx",
              "descendants": 13
            }
          ],
          "36kr": [...],
          "infoq": [...],
          "sspai": [...]
        }
      }
    ],
    "archive": [
      {"date": "2026-02-18", "title": "科技新闻日报 2026-02-18"},
      {"date": "2026-02-17", "title": "科技新闻日报 2026-02-17"}
    ]
  }
}
```

### 6.5 推送流程

```
1. GitHub Actions (daily-news.yml) 每日 UTC 0:00 (北京 8:00) 执行
   │
   ├── 爬取新闻，生成 JSON API
   │
   └── 调用 Cloud Function (HTTP Trigger)
       │
       └── Cloud Function
           │
           ├── 获取 FCM Token 列表
           │
           └── 发送推送消息
               │
               └── 用户设备收到通知
                   │
                   └── 点击打开 App → 首页
```

---

## 七、项目结构

### 7.1 Flutter 项目结构

```
tech_news_app/
├── lib/
│   ├── main.dart                 # 应用入口
│   ├── app.dart                  # App 配置
│   │
│   ├── models/                   # 数据模型
│   │   ├── news_item.dart
│   │   ├── daily_news.dart
│   │   └── app_config.dart
│   │
│   ├── services/                 # 服务层
│   │   ├── api_service.dart      # API 请求
│   │   ├── storage_service.dart  # 本地存储
│   │   └── push_service.dart     # 推送服务
│   │
│   ├── providers/                # 状态管理
│   │   ├── news_provider.dart
│   │   ├── settings_provider.dart
│   │   └── theme_provider.dart
│   │
│   ├── screens/                  # 页面
│   │   ├── home_screen.dart
│   │   ├── archive_screen.dart
│   │   └── settings_screen.dart
│   │
│   ├── widgets/                  # 通用组件
│   │   ├── news_card.dart
│   │   ├── source_section.dart
│   │   ├── loading_indicator.dart
│   │   └── error_view.dart
│   │
│   ├── theme/                    # 主题配置
│   │   ├── app_theme.dart
│   │   └── colors.dart
│   │
│   └── utils/                    # 工具类
│       ├── constants.dart
│       └── date_utils.dart
│
├── assets/
│   └── images/
│       └── app_icon.png          # App 图标
│
├── android/                      # Android 配置
│   └── app/src/main/
│       ├── AndroidManifest.xml
│       └── res/
│           └── mipmap-*/         # 图标资源
│
├── pubspec.yaml                  # 依赖配置
└── README.md
```

### 7.2 依赖包列表

```yaml
dependencies:
  flutter:
    sdk: flutter
  
  # 状态管理
  provider: ^6.1.0
  
  # 网络请求
  http: ^1.1.0
  dio: ^5.4.0
  
  # 本地存储
  shared_preferences: ^2.2.0
  sqflite: ^2.3.0
  path_provider: ^2.1.0
  
  # UI 组件
  cached_network_image: ^3.3.0
  shimmer: ^3.0.0
  pull_to_refresh: ^2.0.0
  
  # 功能
  url_launcher: ^6.2.0
  share_plus: ^7.2.0
  package_info_plus: ^5.0.0
  
  # Firebase
  firebase_core: ^2.24.0
  firebase_messaging: ^14.7.0
  flutter_local_notifications: ^16.0.0
  
  # 工具
  intl: ^0.18.0
  logger: ^2.0.0
  connectivity_plus: ^5.0.0

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^3.0.0
```

---

## 八、开发计划

### 8.1 里程碑规划

```
Phase 1: 数据层改造 (2 天)
├── Day 1: 修改 jekyll_generator.py，生成 JSON API
└── Day 2: 测试 API 可访问性，部署验证

Phase 2: Firebase 配置 (1 天)
├── 创建 Firebase 项目
├── 配置 Android 应用
└── 测试 FCM 推送

Phase 3: App 基础框架 (3 天)
├── Day 1: 项目初始化，配置依赖
├── Day 2: 数据模型，API 服务
└── Day 3: 状态管理，基础 UI 框架

Phase 4: 功能开发 (5 天)
├── Day 1-2: 首页新闻列表
├── Day 3: 归档页面
├── Day 4: 设置页面
└── Day 5: 推送功能集成

Phase 5: 优化测试 (3 天)
├── Day 1: 离线缓存，性能优化
├── Day 2: Bug 修复，边缘情况处理
└── Day 3: 测试，生成 APK

Phase 6: 发布准备 (1 天)
├── 生成签名 APK
├── 准备发布素材
└── 部署 Cloud Function
```

### 8.2 详细任务清单

#### Phase 1: 数据层改造

| 任务 | 负责人 | 预计工时 | 状态 |
|------|--------|---------|------|
| 修改 jekyll_generator.py 生成 JSON | - | 4h | 待开始 |
| 创建 /api/news.json 模板 | - | 2h | 待开始 |
| 测试 API 返回格式 | - | 2h | 待开始 |
| 部署并验证线上 API | - | 2h | 待开始 |

#### Phase 2: Firebase 配置

| 任务 | 负责人 | 预计工时 | 状态 |
|------|--------|---------|------|
| 创建 Firebase 项目 | - | 0.5h | 待开始 |
| 添加 Android 应用 | - | 0.5h | 待开始 |
| 下载 google-services.json | - | 0.5h | 待开始 |
| 编写 Cloud Function | - | 2h | 待开始 |
| 测试推送功能 | - | 1h | 待开始 |

#### Phase 3: App 基础框架

| 任务 | 负责人 | 预计工时 | 状态 |
|------|--------|---------|------|
| Flutter 项目初始化 | - | 1h | 待开始 |
| 配置 pubspec.yaml | - | 1h | 待开始 |
| 创建数据模型 | - | 2h | 待开始 |
| 实现 API Service | - | 3h | 待开始 |
| 实现 Storage Service | - | 2h | 待开始 |
| 配置 Provider | - | 2h | 待开始 |

#### Phase 4: 功能开发

| 任务 | 负责人 | 预计工时 | 状态 |
|------|--------|---------|------|
| 首页 UI 布局 | - | 4h | 待开始 |
| NewsCard 组件 | - | 3h | 待开始 |
| SourceSection 组件 | - | 2h | 待开始 |
| 下拉刷新 | - | 2h | 待开始 |
| 归档页面 | - | 4h | 待开始 |
| 设置页面 | - | 3h | 待开始 |
| 深色模式 | - | 2h | 待开始 |
| FCM 集成 | - | 4h | 待开始 |
| 本地通知处理 | - | 2h | 待开始 |

#### Phase 5: 优化测试

| 任务 | 负责人 | 预计工时 | 状态 |
|------|--------|---------|------|
| 离线缓存实现 | - | 4h | 待开始 |
| 加载状态处理 | - | 2h | 待开始 |
| 错误处理 | - | 2h | 待开始 |
| 性能优化 | - | 3h | 待开始 |
| 功能测试 | - | 4h | 待开始 |
| Bug 修复 | - | 4h | 待开始 |

#### Phase 6: 发布准备

| 任务 | 负责人 | 预计工时 | 状态 |
|------|--------|---------|------|
| 生成签名密钥 | - | 0.5h | 待开始 |
| 配置签名打包 | - | 1h | 待开始 |
| 生成 Release APK | - | 0.5h | 待开始 |
| 安装测试 | - | 1h | 待开始 |
| 部署 Cloud Function | - | 1h | 待开始 |

### 8.3 总工时估算

| Phase | 工时 |
|-------|------|
| Phase 1: 数据层改造 | 10h |
| Phase 2: Firebase 配置 | 4.5h |
| Phase 3: App 基础框架 | 11h |
| Phase 4: 功能开发 | 26h |
| Phase 5: 优化测试 | 19h |
| Phase 6: 发布准备 | 4h |
| **总计** | **74.5h (约 10 个工作日)** |

---

## 九、验收标准

### 9.1 功能验收

| 功能 | 验收标准 | 通过 |
|------|---------|------|
| 新闻列表 | 能正常加载并显示今日 40 条新闻 | ☐ |
| 来源分组 | 新闻按 4 个来源正确分组显示 | ☐ |
| 原文跳转 | 点击新闻能正确跳转到原网页 | ☐ |
| 下拉刷新 | 下拉能刷新获取最新内容 | ☐ |
| 离线缓存 | 断网后能查看已缓存内容 | ☐ |
| 历史归档 | 能查看往期日报列表 | ☐ |
| 深色模式 | 能切换明/暗主题 | ☐ |
| 推送通知 | 每日 8:00 能收到推送 | ☐ |
| 推送跳转 | 点击通知能打开 App | ☐ |

### 9.2 性能验收

| 指标 | 标准 | 通过 |
|------|------|------|
| 冷启动时间 | < 2s | ☐ |
| 列表滚动 | 60fps，无明显卡顿 | ☐ |
| 内存占用 | < 100MB | ☐ |
| 安装包大小 | < 20MB | ☐ |
| 首屏加载 | < 3s (正常网络) | ☐ |

### 9.3 兼容性验收

| 测试项 | 标准 | 通过 |
|--------|------|------|
| Android 版本 | Android 6.0+ | ☐ |
| 屏幕尺寸 | 5寸 - 7寸 | ☐ |
| 横竖屏 | 竖屏正常显示 | ☐ |
| 网络环境 | WiFi/4G/弱网 | ☐ |

---

## 十、风险与对策

| 风险 | 影响 | 概率 | 对策 |
|------|------|------|------|
| RSS 源失效 | 新闻无法更新 | 中 | 添加错误日志，监控源可用性 |
| FCM 推送延迟 | 用户体验差 | 低 | 添加本地定时提醒作为备份 |
| API 访问慢 | 首屏加载慢 | 中 | 添加 CDN，优化数据结构 |
| 用户隐私合规 | 上架被拒 | 低 | 不收集任何用户数据，隐私政策 |

---

## 十一、后续迭代规划

### v1.1 (MVP 后 1 个月)
- 收藏功能
- 搜索功能
- 分享功能
- 首页来源筛选

### v1.2 (MVP 后 2 个月)
- AI 摘要生成
- 关键词提取
- 推送时间自定义

### v2.0 (MVP 后 3 个月)
- iOS 版本
- 用户账号系统
- 跨设备同步
- 阅读偏好学习

---

## 十二、附录

### 12.1 参考资料

- [Flutter 官方文档](https://flutter.dev/docs)
- [Firebase Cloud Messaging 文档](https://firebase.google.com/docs/cloud-messaging)
- [Material Design 指南](https://material.io/design)

### 12.2 相关链接

- 博客网站：https://leonce28.github.io
- GitHub 仓库：https://github.com/leonce28/leonce28.github.io
- API 端点：https://leonce28.github.io/api/news.json

### 12.3 变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|---------|------|
| 1.0 | 2026-02-19 | 初始版本 | AI 产品分析 |

---

**文档结束**
